import{e as w,j as t,a as y}from"./index-Cu5lRAYs.js";import{b as h,L as T}from"./vendor-react-BMB3rUHI.js";const M=({loadingPhase:n})=>{const{marketData:l,loading:a,lastFetch:d}=w(),c=h.useRef(null),i=h.useRef(!1),o=h.useMemo(()=>{if(!l)return[];const{indices:e=[],commodities:s=[]}=l,r=[...e,...s];return["NIFTY 50","NSE 50","50","SENSEX","BSE SENSEX","Gold","Silver"].map(m=>r.find(v=>v.name===m)).filter(Boolean)},[l]);h.useEffect(()=>{let e,s=0;const r=40;let u=0;const m=p=>{s||(s=p);const S=p-s;if(s=p,c.current&&!i.current){const N=r*S/1e3;if(u+=N,u>=1){const j=Math.floor(u);u-=j;const{scrollLeft:E,scrollWidth:b}=c.current;E>=b/2?c.current.scrollLeft=0:c.current.scrollLeft+=j}}else s=p;e=requestAnimationFrame(m)},v=setTimeout(()=>{e=requestAnimationFrame(m)},1e3);return()=>{cancelAnimationFrame(e),clearTimeout(v)}},[o]);const f=e=>{if(!e.timestamp)return!0;const r=Date.now()-e.timestamp,m=["Gold","Silver","Crude Oil"].includes(e.name)?3600*1e3:900*1e3;return r>m},g=e=>e?new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"",x=e=>e==="NSE 50"||e==="50"?"NIFTY 50":e==="BSE SENSEX"?"SENSEX":e,k=()=>{if(!n)return{};let e="transparent";return n===1?e="rgba(144, 238, 144, 0.2)":n===2?e="rgba(60, 179, 113, 0.2)":n===3&&(e="rgba(34, 139, 34, 0.2)"),{background:`linear-gradient(to bottom, transparent, ${e})`,transition:"background 0.5s ease"}};return a&&o.length===0||o.length===0?null:t.jsxs("div",{className:"market-ticker-container",style:k(),children:[t.jsx("div",{className:"ticker-label",children:"ðŸ“ˆ"}),t.jsx("div",{className:"ticker-track-wrapper",ref:c,onMouseEnter:()=>i.current=!0,onMouseLeave:()=>i.current=!1,onTouchStart:()=>i.current=!0,onTouchEnd:()=>i.current=!1,children:t.jsx("div",{className:"ticker-track",children:[...o,...o].map((e,s)=>{const r=f(e);return t.jsxs("div",{className:`ticker-item ${r?"stale-data":""}`,children:[t.jsx("span",{className:"ticker-name",children:x(e.name)}),t.jsxs("span",{className:"ticker-price",children:[e.name==="Gold"||e.name==="Silver"?e.value:typeof e.value=="number"?e.value.toFixed(2):e.value,e.unit?t.jsx("span",{style:{fontSize:"0.7em",marginLeft:"2px"},children:e.unit}):""]}),t.jsxs("span",{className:`ticker-change ${parseFloat(e.change)>=0?"positive":"negative"}`,children:[parseFloat(e.change)>=0?"â–²":"â–¼"," ",Math.abs(parseFloat(e.changePercent)).toFixed(2),"%"]})]},`${e.name}-${s}`)})})}),d&&t.jsxs("div",{className:"ticker-updated",children:[t.jsx("span",{style:{marginRight:"4px"},children:"ðŸ•’"})," ",g(d)]})]})},F=()=>{const{settings:n,updateSettings:l}=y(),a=n.theme==="light",d=()=>{l({...n,theme:a?"dark":"light"})};return t.jsx("button",{onClick:d,className:"header__action-btn",title:a?"Switch to Dark Mode":"Switch to Light Mode",style:{background:"transparent",border:"none",cursor:"pointer",padding:"0 8px",color:"var(--text-primary)"},children:a?"ðŸŒ™":"â˜€ï¸"})};function _({title:n,icon:l,showBack:a=!1,backTo:d="/",actions:c,pills:i,activePill:o,onPillChange:f,compact:g=!1,loadingPhase:x}){const[k,e]=h.useState(window.innerWidth>=1024);h.useEffect(()=>{const r=()=>e(window.innerWidth>=1024);return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]);const s=r=>r.includes("Morning")?"ðŸŒ…":r.includes("Midday")?"â˜€ï¸":r.includes("Evening")?"ðŸŒ™":r;return t.jsxs("header",{className:`header ${g?"header--compact":""}`,children:[a?t.jsxs(T,{to:d,className:"header__back",children:[t.jsx("span",{children:"â†"}),t.jsx("span",{children:n})]}):t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[k&&t.jsx(F,{}),t.jsx("h1",{className:"header__title"})]}),!a&&t.jsx(M,{loadingPhase:x}),i&&t.jsx("div",{className:"header__pills",children:i.map(r=>t.jsx("button",{className:`time-pill time-pill--matte ${o===r?"time-pill--active":""}`,onClick:()=>f&&f(r),title:r,children:s(r)},r))}),t.jsx("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:c})]})}export{_ as H,M};
//# sourceMappingURL=Header-wyIJ1Xr8.js.map
