import{d as M,a as Y,j as t}from"./index-Cu5lRAYs.js";import{b as r,R as $}from"./vendor-react-BMB3rUHI.js";import{H as K}from"./Header-wyIJ1Xr8.js";import{N as C}from"./NewsSection-C0taUcN_.js";import{S as W}from"./SectionNavigator-wZmgApWG.js";import{I as q}from"./ImageCard-C1RhXYns.js";import"./utils-sentiment-EAYl0nxh.js";const T="buzz_page_cache";function ee(){const{newsData:l,refreshNews:E,loading:L,loadSection:v}=M(),{settings:o}=Y(),[i,f]=r.useState("tamil"),[z,k]=r.useState(null),[_,g]=r.useState(0);r.useEffect(()=>{try{const e=localStorage.getItem(T);if(e){const n=JSON.parse(e);Date.now()-(n.timestamp||0)<480*60*1e3?(k(n),g(1)):(console.log("[Buzz] Cache expired, showing anyway until live loads"),k(n),g(1))}}catch(e){console.warn("Buzz Cache read error",e)}},[]),r.useEffect(()=>{["entertainment","social","technology","local","world","india","chennai"].forEach(n=>v(n))},[v]);const d=$.useCallback(e=>{if(!e)return[];const n=(o.freshnessLimitHours||72)*36e5,s=Date.now();return e.filter(m=>s-(m.publishedAt||0)<n)},[o.freshnessLimitHours]),b=l.entertainment&&l.entertainment.length>0;r.useEffect(()=>{b&&g(3)},[b]);const c=b?l:z?.data||{},D=r.useMemo(()=>{const e=c.entertainment||[],n={tamil:["vijay","ajith","rajini","kamal","dhanush","suriya","vikram","simbu","siva karthikeyan","trisha","nayanthara","anirudh","ar rahman","kollywood","thalapathy","thala","udhayanidhi","vetri maaran","lokesh","nelson","jailer","leo","kanguva","indian 2","vettaiyan","goat","viduthalai","karthi","sethupathi","tamil","chennai"],hindi:["shah rukh","srk","salman","aamir","ranbir","alia","deepika","ranveer","kareena","akshay","bachchan","bollywood","hrithik","katrina","vicky kaushal","karan johar","yrf","dharma","pathaan","jawan","tiger 3","animal","dunki","war 2","singham","hindi","mumbai"],hollywood:["oscar","grammy","emmy","golden globe","marvel","dc","disney","warner bros","universal","tom cruise","dicaprio","nolan","avengers","spider-man","batman","superman","taylor swift","beyonce","kim kardashian","kanye","justin bieber","selena gomez","zendaya","hollywood","bad bunny","rihanna","drake"],ott:["netflix","prime video","hotstar","sonyliv","zee5","aha","streaming","web series","season","episode","ott"]};return e.map(s=>{const m=(s.title+" "+(s.summary||"")).toLowerCase();return n.tamil.some(h=>m.includes(h))?{...s,region:"tamil"}:n.hindi.some(h=>m.includes(h))?{...s,region:"hindi"}:n.hollywood.some(h=>m.includes(h))?{...s,region:"hollywood"}:n.ott.some(h=>m.includes(h))?{...s,region:"ott"}:s})},[c.entertainment]),j=r.useMemo(()=>{const e={india:["india","indian","bollywood","cricket","modi","delhi","mumbai","bangalore","hyderabad","ipl","bcci"],tamilnadu:["chennai","tamil","tamilnadu","kollywood","rajini","kamal","vijay","trichy","coimbatore","madurai","tn"],muscat:["muscat","oman","gulf","gcc","uae","dubai","arab","middle east","expat","omani"]},n=a=>{const u=(a.title+" "+(a.summary||"")).toLowerCase();return e.tamilnadu.some(w=>u.includes(w))?"tamilnadu":e.muscat.some(w=>u.includes(w))?"muscat":e.india.some(w=>u.includes(w))?"india":"world"},s=d(c.social||[]),m=d(c.world||[]),h=d(c.india||[]),A=d(c.chennai||[]),O=d(c.local||[]),p={world:[],india:[],tamilnadu:[],muscat:[]};s.forEach(a=>{const u=n(a);p[u].push({...a,source:"social"})}),m.filter(a=>a.title?.toLowerCase().includes("trend")||a.title?.toLowerCase().includes("viral")||a.title?.toLowerCase().includes("social")).forEach(a=>p.world.push({...a,source:"world"})),h.filter(a=>a.title?.toLowerCase().includes("trend")||a.title?.toLowerCase().includes("viral")||a.title?.toLowerCase().includes("social")).forEach(a=>p.india.push({...a,source:"india"})),A.forEach(a=>{p.tamilnadu.push({...a,source:"chennai"})}),O.forEach(a=>{p.muscat.push({...a,source:"local"})});const B={world:o.socialTrends?.worldCount??8,india:o.socialTrends?.indiaCount??8,tamilnadu:o.socialTrends?.tamilnaduCount??5,muscat:o.socialTrends?.muscatCount??4},y=[];return Object.entries(B).forEach(([a,u])=>{const w=p[a];w.sort((x,P)=>(P.publishedAt||0)-(x.publishedAt||0)),w.slice(0,u).forEach(x=>{y.push({...x,region:a,regionLabel:a==="world"?"ðŸŒ World":a==="india"?"ðŸ‡®ðŸ‡³ India":a==="tamilnadu"?"ðŸ›ï¸ Tamil Nadu":"ðŸï¸ Muscat"})})}),y.sort((a,u)=>(u.publishedAt||0)-(a.publishedAt||0)),y},[c,o.freshnessLimitHours,o.socialTrends,d]);r.useEffect(()=>{if(b)try{const e={timestamp:Date.now(),data:{entertainment:l.entertainment,social:l.social,technology:l.technology,world:l.world,india:l.india,chennai:l.chennai,local:l.local}};localStorage.setItem(T,JSON.stringify(e))}catch(e){console.warn("Buzz Cache write error",e)}},[b,l]);const H=()=>{g(3),E(["technology","social","world","india","chennai","local"])},I=[{id:"entertainment",icon:"ðŸŽ¬",label:"Entertainment"},{id:"social-trends",icon:"ðŸ‘¥",label:"Social Trends"},{id:"tech-news",icon:"ðŸš€",label:"Tech & Startups"},{id:"ai-innovation",icon:"ðŸ¤–",label:"AI & Innovation"}],[N,S]=r.useState(!1);r.useEffect(()=>{const e=()=>{window.scrollY>400?S(!0):S(!1)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]);const R=()=>{window.scrollTo({top:0,behavior:"smooth"})};return t.jsxs("div",{className:"page-container",children:[t.jsx(K,{title:"Buzz Hub",icon:"ðŸŽ­",onRefresh:H,loadingPhase:_||(L?3:0)}),t.jsxs("main",{className:"main-content",children:[t.jsxs("section",{id:"entertainment",className:"news-section entertainment-hub",children:[t.jsxs("h2",{className:"news-section__title news-section__title--entertainment",children:[t.jsx("span",{children:"ðŸŽ¬"})," Entertainment"]}),t.jsxs("div",{className:"entertainment-tabs",children:[t.jsx("button",{className:`ent-tab ${i==="tamil"?"ent-tab--active":""}`,onClick:()=>f("tamil"),children:"ðŸŽ­ Tamil"}),t.jsx("button",{className:`ent-tab ${i==="hindi"?"ent-tab--active":""}`,onClick:()=>f("hindi"),children:"ðŸŽª Hindi"}),t.jsx("button",{className:`ent-tab ${i==="hollywood"?"ent-tab--active":""}`,onClick:()=>f("hollywood"),children:"ðŸŽ¬ Hollywood"}),t.jsx("button",{className:`ent-tab ${i==="ott"?"ent-tab--active":""}`,onClick:()=>f("ott"),children:"ðŸ“º OTT"})]}),t.jsx("div",{className:"entertainment-content",children:t.jsx(C,{title:i==="tamil"?"Tamil Cinema":i==="hindi"?"Hindi Cinema":i==="hollywood"?"Hollywood":"OTT & Streaming",icon:i==="tamil"?"ðŸŽ­":i==="hindi"?"ðŸŽª":i==="hollywood"?"ðŸŽ¬":"ðŸ“º",news:d(D.filter(e=>e.region===i)),maxDisplay:i==="tamil"?o.entertainment?.tamilCount??5:i==="hindi"?o.entertainment?.hindiCount??5:i==="hollywood"?o.entertainment?.hollywoodCount??3:o.entertainment?.ottCount??2,hideTitle:!0,showCritics:!1})})]}),t.jsxs("section",{id:"social-trends",className:"news-section",children:[t.jsxs("h2",{className:"news-section__title news-section__title--social",children:[t.jsx("span",{children:"ðŸ‘¥"})," Social Trends"]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"16px",padding:"0 16px"},children:[j.map((e,n)=>t.jsx(q,{article:{...e,time:e.time||"Recently"},href:e.link,badge:e.regionLabel,size:"medium"},n)),j.length===0&&t.jsx("div",{className:"empty-state",style:{gridColumn:"1/-1"},children:t.jsx("p",{children:"No social trends available"})})]})]}),t.jsx(C,{id:"tech-news",title:"Tech & Startups",icon:"ðŸš€",colorClass:"news-section__title--world",news:d(c.technology),maxDisplay:o.sections?.technology?.count||5,showCritics:!1}),t.jsx(C,{id:"ai-innovation",title:"AI & Innovation",icon:"ðŸ¤–",colorClass:"news-section__title--entertainment",news:d(c.technology?.filter(e=>e.title?.toLowerCase().includes("ai")||e.title?.toLowerCase().includes("innovation")||e.title?.toLowerCase().includes("machine learning")||e.title?.toLowerCase().includes("chatgpt")||e.title?.toLowerCase().includes("gemini"))),maxDisplay:6,showCritics:!1})]}),t.jsx(W,{sections:I}),t.jsx("button",{onClick:R,style:{position:"fixed",bottom:"90px",left:"50%",transform:"translateX(-50%)",width:"40px",height:"40px",borderRadius:"50%",background:"rgba(var(--bg-card), 0.6)",backgroundColor:"rgba(0,0,0,0.5)",color:"#fff",border:"1px solid rgba(255,255,255,0.2)",fontSize:"1.2rem",cursor:"pointer",opacity:N?1:0,pointerEvents:N?"auto":"none",transition:"all 0.3s ease",zIndex:900,backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(0,0,0,0.2)"},className:"back-to-top",children:"â†‘"})]})}export{ee as default};
//# sourceMappingURL=TechSocialPage-D5iGsuXd.js.map
