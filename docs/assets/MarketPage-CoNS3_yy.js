import{j as e,e as T,a as P}from"./index-Cu5lRAYs.js";import{b as x}from"./vendor-react-BMB3rUHI.js";import{S as F}from"./SectionNavigator-wZmgApWG.js";import"./utils-sentiment-EAYl0nxh.js";const M=({indices:t,onRefresh:c,loading:d,lastUpdated:m})=>{const a=["NIFTY 50","SENSEX","NIFTY BANK"].map(r=>t?.find(p=>p.name.toUpperCase().includes(r))).filter(Boolean),i=a.length>0?a:t?.slice(0,3)||[],u=r=>r?new Date(r).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"}):"";return e.jsxs("div",{style:{position:"sticky",top:0,zIndex:100,background:"var(--bg-primary)",paddingBottom:"8px",borderBottom:"1px solid var(--border-default)",boxShadow:"0 4px 12px rgba(0,0,0,0.2)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",background:"var(--gradient-header)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{fontSize:"1.2rem"},children:"ðŸ“ˆ"}),e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.1rem",margin:0,fontWeight:700,color:"var(--text-primary)",lineHeight:1.2},children:"Indian Markets"}),m&&e.jsxs("div",{style:{fontSize:"0.65rem",color:"rgba(255,255,255,0.7)",fontWeight:400},children:["Updated ",u(m)]})]})]}),e.jsx("button",{onClick:c,style:{background:"none",border:"none",cursor:"pointer",fontSize:"1.2rem",padding:"4px",color:"var(--text-primary)",opacity:d?.5:1,transition:"transform 0.3s"},title:"Refresh Markets",className:d?"spin":"",children:d?"âŸ³":"ðŸ”„"})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:`repeat(${i.length}, 1fr)`,gap:"1px",background:"var(--border-default)",marginTop:"0"},children:i.map((r,p)=>{const j=r.direction==="up"||r.change>0,h=j?"var(--accent-success)":"var(--accent-danger)",v=j?"â–²":"â–¼";return e.jsxs("div",{style:{background:"var(--bg-secondary)",padding:"10px 4px",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)",fontWeight:600,marginBottom:"2px",textTransform:"uppercase"},children:r.name.replace("NIFTY","").replace("SENSEX","SENSEX").trim()||r.name}),e.jsx("div",{style:{fontSize:"1.1rem",fontWeight:700,color:"var(--text-primary)",marginBottom:"2px"},children:r.value}),e.jsxs("div",{style:{fontSize:"0.75rem",color:h,fontWeight:600,display:"flex",alignItems:"center",gap:"2px"},children:[e.jsx("span",{children:v}),e.jsx("span",{children:Math.abs(r.change).toFixed(2)}),e.jsxs("span",{style:{opacity:.8},children:["(",Math.abs(r.changePercent).toFixed(2),"%)"]})]})]},p)})}),e.jsx("style",{children:`
                .spin { animation: spin 1s linear infinite; }
                @keyframes spin { 100% { transform: rotate(360deg); } }
            `})]})};function E({funds:t}){const[c,d]=x.useState(!1);if(!t||t.length===0)return e.jsxs("div",{className:"mf-card mf-card--empty",children:[e.jsxs("div",{className:"mf-card__header",children:[e.jsx("span",{children:"ðŸ“Š"})," Mutual Funds"]}),e.jsx("p",{className:"mf-card__empty-text",children:"NAV data unavailable"})]});const m=c?t:t.slice(0,4);return e.jsxs("div",{className:"mf-card",children:[e.jsxs("div",{className:"mf-card__header",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{children:"ðŸ“Š"})," Mutual Fund NAVs"]}),e.jsx("span",{className:"mf-card__date",children:t[0]?.navDate||"Latest"})]}),e.jsx("div",{className:"mf-card__list",children:m.map((l,a)=>e.jsxs("div",{className:"mf-fund",children:[e.jsxs("div",{className:"mf-fund__info",children:[e.jsx("div",{className:"mf-fund__name",children:l.name}),e.jsx("div",{className:"mf-fund__category",children:l.category})]}),e.jsxs("div",{className:"mf-fund__nav",children:[e.jsxs("div",{className:"mf-fund__value",children:["â‚¹",l.nav]}),e.jsxs("div",{className:`mf-fund__change mf-fund__change--${l.direction}`,children:[l.direction==="up"?"â–²":"â–¼"," ",l.changePercent,"%"]})]})]},l.code||a))}),t.length>4&&e.jsx("button",{className:"mf-card__toggle",onClick:()=>d(!c),children:c?"Show Less â–²":`Show All (${t.length}) â–¼`})]})}function D({ipoData:t}){const[c,d]=x.useState("upcoming");if(!t)return e.jsxs("div",{className:"ipo-card ipo-card--empty",children:[e.jsxs("div",{className:"ipo-card__header",children:[e.jsx("span",{children:"ðŸŽ¯"})," IPO Tracker"]}),e.jsx("p",{children:"IPO data unavailable"})]});const m=[{key:"upcoming",label:"Upcoming",icon:"ðŸ“…"},{key:"live",label:"Live",icon:"ðŸ”´"},{key:"recent",label:"Recent",icon:"âœ…"}],l=t[c]||[];return e.jsxs("div",{className:"ipo-card",children:[e.jsxs("div",{className:"ipo-card__header",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{children:"ðŸŽ¯"})," IPO Tracker"]}),t.isFallback&&e.jsx("span",{className:"ipo-card__fallback-badge",children:"Demo Data"})]}),e.jsx("div",{className:"ipo-card__tabs",children:m.map(a=>e.jsxs("button",{className:`ipo-tab ${c===a.key?"ipo-tab--active":""}`,onClick:()=>d(a.key),children:[a.icon," ",a.label,e.jsx("span",{className:"ipo-tab__count",children:t[a.key]?.length||0})]},a.key))}),e.jsx("div",{className:"ipo-card__list",children:l.length===0?e.jsxs("div",{className:"ipo-card__empty",children:["No ",c," IPOs at the moment"]}):l.map((a,i)=>e.jsxs("div",{className:"ipo-item",children:[e.jsxs("div",{className:"ipo-item__header",children:[e.jsxs("div",{className:"ipo-item__name",children:[a.name,a.isSME&&e.jsx("span",{style:{fontSize:"0.6rem",marginLeft:"6px",background:"#333",padding:"2px 4px",borderRadius:"4px"},children:"SME"})]}),e.jsx("div",{className:`ipo-item__status ipo-item__status--${a.status||c}`,children:a.status||c})]}),e.jsxs("div",{className:"ipo-item__details",children:[a.issuePrice&&e.jsxs("div",{className:"ipo-item__detail",children:[e.jsx("span",{className:"ipo-item__label",children:"Price Band:"}),e.jsx("span",{className:"ipo-item__value",children:a.issuePrice})]}),e.jsxs("div",{className:"ipo-item__detail",children:[e.jsx("span",{className:"ipo-item__label",children:"Open:"}),e.jsx("span",{className:"ipo-item__value",children:a.openDate})]}),e.jsxs("div",{className:"ipo-item__detail",children:[e.jsx("span",{className:"ipo-item__label",children:"Close:"}),e.jsx("span",{className:"ipo-item__value",children:a.closeDate})]}),a.issueSize&&a.issueSize!=="-"&&e.jsxs("div",{className:"ipo-item__detail",children:[e.jsx("span",{className:"ipo-item__label",children:"Size:"}),e.jsx("span",{className:"ipo-item__value",children:a.issueSize})]})]})]},i))})]})}function $(){const{marketData:t,loading:c,error:d,refreshMarket:m,lastFetch:l}=T(),{settings:a}=P(),i=a?.market||{},[u,r]=x.useState(()=>Date.now());x.useEffect(()=>{const s=setInterval(()=>r(Date.now()),6e4);return()=>clearInterval(s)},[]);const p=()=>{m()},j=s=>{const n=s?.timestamp||l;return n?u-n:1/0},h=s=>{const n=j(s),C=n>900*1e3;return n>14400*1e3?{opacity:.3,filter:"grayscale(1) brightness(0.7)",transition:"all 0.3s ease"}:C?{opacity:.6,filter:"grayscale(0.5)",transition:"all 0.3s ease"}:{opacity:1,filter:"none",transition:"all 0.3s ease"}},[v,f]=x.useState(!1);x.useEffect(()=>{const s=()=>{f(window.scrollY>400)};return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)},[]);const g=[(i.showGainers!==!1||i.showLosers!==!1)&&{id:"market-movers",icon:"ðŸ“ˆ",label:"Top Movers"},i.showSectorals!==!1&&{id:"sectoral-indices",icon:"ðŸ›ï¸",label:"Sectorals"},i.showCommodities!==!1&&{id:"commodities",icon:"ðŸª™",label:"Commodities"},i.showCurrency!==!1&&{id:"currency",icon:"ðŸ’±",label:"Currency"},i.showFIIDII!==!1&&{id:"fiidii",icon:"ðŸ¦",label:"FII/DII"},i.showMutualFunds!==!1&&{id:"mutual-funds",icon:"ðŸ’°",label:"Mutual Funds"},i.showIPO!==!1&&{id:"ipo-tracker",icon:"ðŸŽ¯",label:"IPO Watch"}].filter(Boolean);if(c&&!t)return e.jsx("div",{className:"page-container",style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh"},children:e.jsxs("div",{className:"loading",children:[e.jsx("div",{className:"loading__spinner"}),e.jsx("span",{children:"Loading Market Data..."})]})});const{indices:N,mutualFunds:y,ipo:b,movers:_,sectorals:k,commodities:I,currencies:S,fiidii:o}=t||{},w=()=>{window.scrollTo({top:0,behavior:"smooth"})};return e.jsxs("div",{className:"page-container",style:{padding:0},children:[e.jsx(M,{indices:N,onRefresh:p,loading:c,lastUpdated:l}),e.jsxs("main",{className:"main-content market-page",style:{padding:"16px",marginTop:0},children:[d&&e.jsx("div",{className:"error-state",style:{marginBottom:"16px",padding:"12px",background:"rgba(255, 71, 87, 0.1)",border:"1px solid var(--accent-danger)",borderRadius:"8px",color:"var(--accent-danger)"},children:e.jsx("p",{style:{margin:0},children:"Failed to load market data. Showing cached data."})}),(i.showGainers!==!1||i.showLosers!==!1)&&e.jsxs("section",{id:"market-movers",className:"market-section",children:[e.jsxs("h2",{className:"market-section__title",children:[e.jsx("span",{children:"ðŸ“ˆ"})," Top Movers"]}),e.jsxs("div",{className:"movers-grid",children:[i.showGainers!==!1&&e.jsxs("div",{className:"movers-column movers-column--gainers",children:[e.jsx("h3",{className:"movers-column__title",children:"ðŸ”¼ Top Gainers"}),_?.gainers?.slice(0,5).map((s,n)=>e.jsxs("div",{className:"mover-item",style:h(s),children:[e.jsx("div",{className:"mover-item__symbol",children:s.symbol}),e.jsxs("div",{className:"mover-item__price",children:["â‚¹",s.price]}),e.jsxs("div",{className:"mover-item__change text-success",children:["+",s.changePercent,"%"]})]},n))]}),i.showLosers!==!1&&e.jsxs("div",{className:"movers-column movers-column--losers",children:[e.jsx("h3",{className:"movers-column__title",children:"ðŸ”½ Top Losers"}),_?.losers?.slice(0,5).map((s,n)=>e.jsxs("div",{className:"mover-item",style:h(s),children:[e.jsx("div",{className:"mover-item__symbol",children:s.symbol}),e.jsxs("div",{className:"mover-item__price",children:["â‚¹",s.price]}),e.jsxs("div",{className:"mover-item__change text-danger",children:[s.changePercent,"%"]})]},n))]})]})]}),i.showSectorals!==!1&&e.jsxs("section",{id:"sectoral-indices",className:"market-section",children:[e.jsxs("h2",{className:"market-section__title",children:[e.jsx("span",{children:"ðŸ›ï¸"})," Sectoral Indices"]}),e.jsx("div",{className:"sectoral-grid",children:k?.map((s,n)=>e.jsxs("div",{className:"sectoral-card",style:h(s),children:[e.jsx("div",{className:"sectoral-card__name",children:s.name}),e.jsx("div",{className:"sectoral-card__value",children:s.value}),e.jsxs("div",{className:`sectoral-card__change ${s.changePercent>=0?"text-success":"text-danger"}`,children:[s.changePercent>=0?"â–²":"â–¼"," ",s.changePercent,"%"]})]},n))})]}),i.showCommodities!==!1&&e.jsxs("section",{id:"commodities",className:"market-section",children:[e.jsxs("h2",{className:"market-section__title",children:[e.jsx("span",{children:"ðŸª™"})," Commodity Watch"]}),e.jsx("div",{className:"commodity-grid",children:I?.map((s,n)=>e.jsxs("div",{className:"commodity-card",style:h(s),children:[e.jsx("div",{className:"commodity-card__name",children:s.name}),e.jsxs("div",{className:"commodity-card__value",children:[s.value," ",e.jsx("span",{className:"commodity-card__unit",children:s.unit})]}),e.jsxs("div",{className:`commodity-card__change ${s.changePercent>=0?"text-success":"text-danger"}`,children:[s.changePercent>=0?"+":"",s.changePercent,"%"]})]},n))})]}),i.showCurrency!==!1&&e.jsxs("section",{id:"currency",className:"market-section",children:[e.jsxs("h2",{className:"market-section__title",children:[e.jsx("span",{children:"ðŸ’±"})," Currency Rates"]}),e.jsx("div",{className:"currency-grid",children:S?.map((s,n)=>e.jsxs("div",{className:"currency-card",style:h(s),children:[e.jsx("div",{className:"currency-card__name",children:s.name}),e.jsxs("div",{className:"currency-card__value",children:["â‚¹",s.value]}),e.jsxs("div",{className:`currency-card__change ${s.changePercent>=0?"text-success":"text-danger"}`,children:[s.changePercent>=0?"+":"",s.changePercent,"%"]})]},n))})]}),i.showFIIDII!==!1&&e.jsxs("section",{id:"fiidii",className:"market-section",children:[e.jsxs("h2",{className:"market-section__title",children:[e.jsx("span",{children:"ðŸ¦"})," FII/DII Activity"]}),e.jsxs("div",{className:"fiidii-container",children:[e.jsxs("div",{className:"fiidii-block",children:[e.jsx("h3",{className:"fiidii-block__title",children:"FII (Foreign Investors)"}),e.jsxs("div",{className:"fiidii-stats",children:[e.jsxs("div",{className:"fiidii-stat",children:[e.jsx("span",{className:"fiidii-stat__label",children:"Buy:"}),e.jsxs("span",{className:"fiidii-stat__value text-success",children:["â‚¹",o?.fii?.buy," Cr"]})]}),e.jsxs("div",{className:"fiidii-stat",children:[e.jsx("span",{className:"fiidii-stat__label",children:"Sell:"}),e.jsxs("span",{className:"fiidii-stat__value text-danger",children:["â‚¹",o?.fii?.sell," Cr"]})]}),e.jsxs("div",{className:"fiidii-stat",children:[e.jsx("span",{className:"fiidii-stat__label",children:"Net:"}),e.jsxs("span",{className:`fiidii-stat__value ${o?.fii?.net>=0?"text-success":"text-danger"}`,children:["â‚¹",o?.fii?.net," Cr"]})]})]})]}),e.jsxs("div",{className:"fiidii-block",children:[e.jsx("h3",{className:"fiidii-block__title",children:"DII (Domestic Investors)"}),e.jsxs("div",{className:"fiidii-stats",children:[e.jsxs("div",{className:"fiidii-stat",children:[e.jsx("span",{className:"fiidii-stat__label",children:"Buy:"}),e.jsxs("span",{className:"fiidii-stat__value text-success",children:["â‚¹",o?.dii?.buy," Cr"]})]}),e.jsxs("div",{className:"fiidii-stat",children:[e.jsx("span",{className:"fiidii-stat__label",children:"Sell:"}),e.jsxs("span",{className:"fiidii-stat__value text-danger",children:["â‚¹",o?.dii?.sell," Cr"]})]}),e.jsxs("div",{className:"fiidii-stat",children:[e.jsx("span",{className:"fiidii-stat__label",children:"Net:"}),e.jsxs("span",{className:`fiidii-stat__value ${o?.dii?.net>=0?"text-success":"text-danger"}`,children:["â‚¹",o?.dii?.net," Cr"]})]})]})]}),e.jsxs("div",{className:"fiidii-date",children:["As of: ",o?.date]})]})]}),i.showMutualFunds!==!1&&e.jsxs("section",{id:"mutual-funds",className:"market-section",children:[e.jsxs("h2",{className:"market-section__title",children:[e.jsx("span",{children:"ðŸ“Š"})," Mutual Fund NAVs"]}),e.jsx(E,{funds:y})]}),i.showIPO!==!1&&e.jsxs("section",{id:"ipo-tracker",className:"market-section",children:[e.jsxs("h2",{className:"market-section__title",children:[e.jsx("span",{children:"ðŸŽ¯"})," IPO Tracker"]}),e.jsx(D,{ipoData:b})]}),e.jsxs("div",{className:"market-disclaimer",children:[e.jsx("div",{children:"* Data is for informational purposes only. Not investment advice."}),t?.fetchedAt&&e.jsxs("div",{style:{fontSize:"0.7rem",opacity:.7,marginTop:"4px"},children:["Last Updated: ",new Date(t.fetchedAt).toLocaleString()]})]})]}),e.jsx(F,{sections:g}),e.jsx("button",{onClick:w,style:{position:"fixed",bottom:"90px",left:"50%",transform:"translateX(-50%)",width:"40px",height:"40px",borderRadius:"50%",background:"rgba(0,0,0,0.5)",color:"#fff",border:"1px solid rgba(255,255,255,0.2)",fontSize:"1.2rem",cursor:"pointer",opacity:v?1:0,pointerEvents:v?"auto":"none",transition:"all 0.3s ease",zIndex:900,backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(0,0,0,0.2)"},children:"â†‘"})]})}export{$ as default};
//# sourceMappingURL=MarketPage-CoNS3_yy.js.map
