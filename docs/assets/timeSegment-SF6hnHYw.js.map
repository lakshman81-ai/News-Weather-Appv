{"version":3,"file":"timeSegment-SF6hnHYw.js","sources":["../../src/utils/timeSegment.js"],"sourcesContent":["// Time Segment Logic based on Daily Event AI V3.3 Specification\n// Segments are based on local time\n\nexport const SEGMENTS = {\n    MORNING_WEATHER: {\n        id: 'morning_weather',\n        name: 'Morning Weather',\n        icon: 'ðŸŒ…',\n        startHour: 6,\n        startMinute: 55,\n        endHour: 7,\n        endMinute: 0,\n        sections: ['weather'],\n        recommended: {\n            world: true,\n            india: true,\n            chennai: true,\n            trichy: true,\n            local: true,\n            social: false,\n            weather: true,\n            market: false\n        }\n    },\n    MORNING_NEWS: {\n        id: 'morning_news',\n        name: 'Morning News',\n        icon: 'ðŸŒ„',\n        startHour: 7,\n        startMinute: 0,\n        endHour: 9,\n        endMinute: 0,\n        sections: ['weather', 'world', 'india', 'chennai', 'trichy', 'local', 'dtNext'],\n        recommended: {\n            world: true,\n            india: true,\n            chennai: true,\n            trichy: true,\n            local: true,\n            social: false,\n            weather: true,\n            market: false\n        }\n    },\n    MARKET_BRIEF: {\n        id: 'market_brief',\n        name: 'Market Brief',\n        icon: 'ðŸ“Š',\n        startHour: 9,\n        startMinute: 0,\n        endHour: 11,\n        endMinute: 55,\n        sections: ['market', 'india', 'world'],\n        recommended: {\n            world: true,\n            india: true,\n            chennai: false,\n            trichy: false,\n            local: false,\n            social: false,\n            weather: false,\n            market: true\n        }\n    },\n    MIDDAY_BRIEF: {\n        id: 'midday_brief',\n        name: 'Midday Brief',\n        icon: 'â˜€ï¸',\n        startHour: 11,\n        startMinute: 55,\n        endHour: 14,\n        endMinute: 30,\n        sections: ['india', 'world', 'chennai', 'trichy'],\n        recommended: {\n            world: true,\n            india: true,\n            chennai: true,\n            trichy: true,\n            local: false,\n            social: false,\n            weather: true,\n            market: true\n        }\n    },\n    MARKET_MOVERS: {\n        id: 'market_movers',\n        name: 'Market Movers',\n        icon: 'ðŸ“ˆ',\n        startHour: 14,\n        startMinute: 30,\n        endHour: 16,\n        endMinute: 20,\n        sections: ['market', 'india', 'world'],\n        recommended: {\n            world: true,\n            india: true,\n            chennai: false,\n            trichy: false,\n            local: false,\n            social: false,\n            weather: false,\n            market: true\n        }\n    },\n    EVENING_NEWS: {\n        id: 'evening_news',\n        name: 'Evening News',\n        icon: 'ðŸŒ†',\n        startHour: 16,\n        startMinute: 20,\n        endHour: 16,\n        endMinute: 45,\n        sections: ['world', 'india', 'chennai', 'trichy', 'local', 'social'],\n        recommended: {\n            world: true,\n            india: true,\n            chennai: true,\n            trichy: true,\n            local: true,\n            social: true,\n            weather: true,\n            market: true\n        }\n    },\n    LOCAL_EVENTS: {\n        id: 'local_events',\n        name: 'Local Events',\n        icon: 'ðŸ“',\n        startHour: 16,\n        startMinute: 45,\n        endHour: 19,\n        endMinute: 30,\n        sections: ['chennai', 'trichy', 'local', 'social'],\n        recommended: {\n            world: false,\n            india: true,\n            chennai: true,\n            trichy: true,\n            local: true,\n            social: true,\n            weather: true,\n            market: false\n        }\n    },\n    NIGHT_WRAP_UP: {\n        id: 'night_wrap_up',\n        name: 'Night Wrap-Up',\n        icon: 'ðŸŒ™',\n        startHour: 19,\n        startMinute: 30,\n        endHour: 20,\n        endMinute: 0,\n        sections: ['world', 'india', 'chennai', 'trichy', 'local', 'social', 'market'],\n        recommended: {\n            world: true,\n            india: true,\n            chennai: true,\n            trichy: true,\n            local: true,\n            social: true,\n            weather: true,\n            market: true\n        }\n    },\n    URGENT_ONLY: {\n        id: 'urgent_only',\n        name: 'Urgent Alerts Only',\n        icon: 'ðŸ””',\n        startHour: 20,\n        startMinute: 0,\n        endHour: 6,\n        endMinute: 55,\n        sections: ['urgent'],\n        recommended: {\n            world: false,\n            india: false,\n            chennai: false,\n            trichy: false,\n            local: false,\n            social: false,\n            weather: true,\n            market: false\n        }\n    }\n};\n\n/**\n * Get current time segment based on local time\n * @param {Date} date - Optional date to check, defaults to now\n * @returns {Object} Current segment object\n */\nexport function getCurrentSegment(date = new Date()) {\n    const hours = date.getHours();\n    const minutes = date.getMinutes();\n    const totalMinutes = hours * 60 + minutes;\n\n    // Convert segment times to total minutes for comparison\n    const segmentList = Object.values(SEGMENTS);\n\n    for (const segment of segmentList) {\n        const startTotal = segment.startHour * 60 + segment.startMinute;\n        let endTotal = segment.endHour * 60 + segment.endMinute;\n\n        // Handle overnight segment (URGENT_ONLY: 20:00 - 06:55)\n        if (segment.id === 'urgent_only') {\n            if (totalMinutes >= startTotal || totalMinutes < endTotal) {\n                return segment;\n            }\n        } else {\n            if (totalMinutes >= startTotal && totalMinutes < endTotal) {\n                return segment;\n            }\n        }\n    }\n\n    // Default to urgent only if no match\n    return SEGMENTS.URGENT_ONLY;\n}\n\n/**\n * Get recommended section toggles based on current segment\n * @param {Object} segment - Current segment object\n * @returns {Object} Recommended toggle states\n */\nexport function getRecommendedToggles(segment) {\n    return segment?.recommended || {\n        world: true,\n        india: true,\n        chennai: true,\n        trichy: true,\n        local: true,\n        social: false,\n        weather: true,\n        market: false\n    };\n}\n\n/**\n * Get weather time blocks based on current time\n * If evening, show: Evening, Tomorrow Morning, Tomorrow Noon\n * If morning, show: Morning, Noon, Evening\n * etc.\n * @param {Date} date - Optional date to check\n * @returns {Array} Array of time block labels with dates\n */\nexport function getWeatherTimeBlocks(date = new Date()) {\n    const hours = date.getHours();\n\n    const blocks = [];\n    const tomorrow = new Date(date);\n    tomorrow.setDate(tomorrow.getDate() + 1);\n\n    if (hours >= 6 && hours < 11) {\n        // Morning: Show Morning, Noon, Evening (today)\n        blocks.push({ label: 'Morning', sublabel: 'Today', date: date, period: 'morning' });\n        blocks.push({ label: 'Noon', sublabel: 'Today', date: date, period: 'noon' });\n        blocks.push({ label: 'Evening', sublabel: 'Today', date: date, period: 'evening' });\n    } else if (hours >= 11 && hours < 16) {\n        // Noon: Show Noon, Evening (today), Morning (tomorrow)\n        blocks.push({ label: 'Noon', sublabel: 'Today', date: date, period: 'noon' });\n        blocks.push({ label: 'Evening', sublabel: 'Today', date: date, period: 'evening' });\n        blocks.push({ label: 'Morning', sublabel: 'Tomorrow', date: tomorrow, period: 'morning' });\n    } else if (hours >= 16 && hours < 20) {\n        // Evening: Show Evening, Morning (tomorrow), Noon (tomorrow)\n        blocks.push({ label: 'Evening', sublabel: 'Today', date: date, period: 'evening' });\n        blocks.push({ label: 'Morning', sublabel: 'Tmrw', date: tomorrow, period: 'morning' });\n        blocks.push({ label: 'Noon', sublabel: 'Tmrw', date: tomorrow, period: 'noon' });\n    } else {\n        // Night (20:00+): Show Morning, Noon, Evening (all tomorrow)\n        blocks.push({ label: 'Morning', sublabel: 'Tmrw', date: tomorrow, period: 'morning' });\n        blocks.push({ label: 'Noon', sublabel: 'Tmrw', date: tomorrow, period: 'noon' });\n        blocks.push({ label: 'Evening', sublabel: 'Tmrw', date: tomorrow, period: 'evening' });\n    }\n\n    return blocks;\n}\n\n/**\n * Format segment time range for display\n * @param {Object} segment - Segment object\n * @returns {string} Formatted time range\n */\nexport function formatSegmentTime(segment) {\n    if (!segment) return '';\n\n    // Fallback: If segment object lacks detailed time info (e.g. from scheduler), look it up\n    let targetSegment = segment;\n    if (segment.startHour === undefined && segment.id) {\n        const found = Object.values(SEGMENTS).find(s => s.id === segment.id);\n        if (found) targetSegment = found;\n    }\n\n    // If we still don't have valid time data, return empty string or a default\n    if (targetSegment.startHour === undefined) return '';\n\n    const formatTime = (h, m) => {\n        const hour = h % 12 || 12;\n        const ampm = h < 12 ? 'AM' : 'PM';\n        const min = (m || 0).toString().padStart(2, '0');\n        return `${hour}:${min} ${ampm}`;\n    };\n\n    return `${formatTime(targetSegment.startHour, targetSegment.startMinute)} - ${formatTime(targetSegment.endHour, targetSegment.endMinute)}`;\n}\n\n/**\n * Check if DT Next section should be shown (only in Morning News segment)\n * @param {Object} segment - Current segment\n * @returns {boolean}\n */\nexport function shouldShowDTNext(segment) {\n    return segment.id === 'morning_news';\n}\n\n/**\n * Get all available segments for display in settings\n * @returns {Array} Array of segment objects\n */\nexport function getAllSegments() {\n    return Object.values(SEGMENTS);\n}\n\n/**\n * Get topline summary based on current segment\n * @param {Object} segment - Current segment\n * @returns {string} Topline header text\n */\nexport function getTopline(segment) {\n    if (!segment) return \"Welcome to Daily Event AI\";\n    switch (segment.id) {\n        case 'morning_weather': return \"Good Morning! Here's your weather start.\";\n        case 'morning_news': return \"Your Morning Headlines are ready.\";\n        case 'market_brief': return \"Market Open: Sensex & Nifty Updates.\";\n        case 'midday_brief': return \"Midday Update: Top stories so far.\";\n        case 'market_movers': return \"Market Movers: Gainers & Losers.\";\n        case 'evening_news': return \"Evening Wrap: Catch up on the day.\";\n        case 'local_events': return \"How your evening looks around town.\";\n        case 'night_wrap_up': return \"The Day in Review.\";\n        case 'urgent_only': return \"Urgent Updates Only.\";\n        default: return \"Daily Event AI: Live Updates.\";\n    }\n}\n"],"names":["SEGMENTS","getCurrentSegment","date","hours","minutes","totalMinutes","segmentList","segment","startTotal","endTotal","getRecommendedToggles","getTopline"],"mappings":"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"}