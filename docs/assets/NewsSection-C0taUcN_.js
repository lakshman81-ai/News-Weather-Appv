import{d as B,r as I,j as s,t as z}from"./index-Cu5lRAYs.js";import{b as g}from"./vendor-react-BMB3rUHI.js";function F({id:f,title:x,icon:j,colorClass:m,news:n=[],maxDisplay:l=3,showExpand:y=!0,error:d=null,extraContent:b=null,onArticleClick:h=null,showCritics:_=!0}){const[i,S]=g.useState(!1),[c,N]=g.useState(!1),{auditResults:r}=B(),C=I().rankingWeights?.trending?.threshold||12,v=i?n.length:Math.min(l,n.length),w=n.slice(0,v),k=n.length>l,o=n.health||{status:"ok"},M=n.isSingleSource,p=e=>!e&&e!==0?"":e>15?"â­â­â­â­â­":e>10?"â­â­â­â­":e>6?"â­â­â­":e>3?"â­â­":"â­",$=e=>{switch(e?.toUpperCase()){case"HIGH":return"news-item__confidence--high";case"MEDIUM":return"news-item__confidence--medium";case"LOW":return"news-item__confidence--low";default:return""}},u=e=>{if(!e)return"";const a=Math.floor((Date.now()-e)/1e3);let t=a/31536e3;return t>1?Math.floor(t)+"y ago":(t=a/2592e3,t>1?Math.floor(t)+"mo ago":(t=a/86400,t>1?Math.floor(t)+"d ago":(t=a/3600,t>1?Math.floor(t)+"h ago":(t=a/60,t>1?Math.floor(t)+"m ago":"Just now"))))},L=e=>{z(e),h&&h(e),e.url&&window.open(e.url,"_blank","noopener,noreferrer")},A=()=>d?s.jsxs("div",{className:"empty-state",style:{borderColor:"rgba(255, 87, 87, 0.3)"},children:[s.jsx("div",{className:"empty-state__icon",children:"âŒ"}),s.jsx("p",{style:{color:"#ff5757"},children:d})]}):n.length===0?s.jsxs("div",{className:"empty-state",children:[s.jsx("div",{className:"empty-state__icon",children:"ðŸ“­"}),s.jsx("p",{children:"No news available for this section"})]}):s.jsxs(s.Fragment,{children:[b,s.jsx("div",{className:"news-list",children:w.map((e,a)=>s.jsxs("article",{className:"news-item",onClick:()=>L(e),style:{cursor:e.url?"pointer":"default"},children:[s.jsxs("div",{className:"news-item__badges",style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",fontSize:"0.85rem"},children:[p(e.impactScore)&&s.jsx("span",{title:`Impact Score: ${e.impactScore?.toFixed(1)}`,children:p(e.impactScore)}),e.isBreaking&&s.jsx("span",{title:"Breaking News",children:"âš¡"}),!e.isBreaking&&e.impactScore>C&&s.jsx("span",{title:"Trending",children:"ðŸ”¥"}),r[e.id]&&s.jsxs("span",{className:"audit-badges",style:{display:"flex",gap:"4px"},children:[r[e.id].consensus?.badge&&s.jsx("span",{title:`Corroborated by ${r[e.id].consensus.count} sources`,children:r[e.id].consensus.badge}),r[e.id].persistenceBadge&&s.jsx("span",{title:"Persistence",children:r[e.id].persistenceBadge}),r[e.id].relevance?.badge&&s.jsx("span",{title:"Relevance",children:r[e.id].relevance.badge}),r[e.id].anomaly?.badge&&s.jsx("span",{title:`Anomaly: ${r[e.id].anomaly.type}`,children:r[e.id].anomaly.badge}),r[e.id].breakingVerified&&s.jsx("span",{title:"Verified",children:r[e.id].breakingVerified})]})]}),s.jsxs("h3",{className:"news-item__headline",children:["â€¢ ",e.headline,e.url&&s.jsx("span",{style:{fontSize:"0.7rem",marginLeft:"8px",color:"var(--accent-secondary)"},children:"â†—"})]}),e.summary&&s.jsx("p",{className:"news-item__summary",children:e.summary}),_&&e.criticsView&&s.jsxs("div",{className:"news-item__critics",children:[s.jsx("span",{children:"ðŸ’¬"}),s.jsxs("div",{children:[s.jsx("strong",{style:{color:"var(--accent-secondary)",display:"block",marginBottom:"2px"},children:"Critics Take:"}),e.criticsView]})]}),s.jsxs("div",{className:"news-item__meta",children:[e.sentiment&&s.jsx("span",{className:`sentiment-badge sentiment--${e.sentiment.label}`,title:`Sentiment: ${e.sentiment.label}`,children:e.sentiment.label==="positive"?"ðŸŸ¢":e.sentiment.label==="negative"?"ðŸ”´":"âšª"}),s.jsx("span",{className:"news-item__source",children:e.source}),e.sourceCount>1&&s.jsxs("span",{className:"news-item__consensus",title:`Reported by ${e.sourceCount} sources`,children:["ðŸ”” ",e.sourceCount," sources"]}),s.jsx("span",{children:"|"}),s.jsx("span",{children:u(e.publishedAt)||e.time}),e.sourceCount&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:"|"}),s.jsxs("span",{children:["#",e.sourceCount," Sources"]})]}),s.jsx("span",{children:"|"}),s.jsx("span",{className:`news-item__confidence ${$(e.confidence)}`,children:e.confidence})]})]},e.id||a))}),y&&k&&s.jsxs("div",{className:"news-more",onClick:()=>S(!i),children:[s.jsx("span",{style:{fontSize:"1.2rem"},children:i?"â–²":"â–¼"}),s.jsx("span",{children:i?"Collapse":`See ${n.length-l} more stories`})]})]});return s.jsxs("section",{className:"news-section",id:f,children:[s.jsxs("h2",{className:`news-section__title ${m}`,onClick:()=>N(!c),style:{cursor:"pointer"},title:`Tap to fold/unfold. Health: ${o.status.toUpperCase()}`,children:[s.jsx("span",{children:j}),x,o.status==="critical"&&s.jsx("span",{title:"Critical: Feed yield < 10% of average",style:{marginLeft:"8px"},children:"ðŸ”´"}),o.status==="warning"&&s.jsx("span",{title:"Warning: Feed yield < 50% of average",style:{marginLeft:"8px"},children:"âš ï¸"}),M&&n.length>3&&s.jsx("span",{title:"Single Source: Potential echo chamber",style:{marginLeft:"8px"},children:"ðŸ“¡"}),n.length>0&&s.jsxs("span",{style:{opacity:.6,fontSize:"0.9em",marginLeft:"6px"},children:["(",n.length,")"]}),s.jsx("span",{style:{marginLeft:"8px",fontSize:"0.8em",opacity:.5},children:c?"â–¼":"â–²"}),n.length>0&&n[0].fetchedAt&&s.jsx("span",{style:{fontSize:"0.65rem",marginLeft:"auto",padding:"2px 6px",borderRadius:"4px",background:Date.now()-n[0].fetchedAt<36e5?"rgba(0, 255, 0, 0.2)":"rgba(255, 165, 0, 0.2)",color:Date.now()-n[0].fetchedAt<36e5?"#4caf50":"#ffa726",border:"1px solid currentColor",fontWeight:"normal"},children:Date.now()-n[0].fetchedAt<3e5?"LIVE":u(n[0].fetchedAt)})]}),!c&&A()]})}export{F as N};
//# sourceMappingURL=NewsSection-C0taUcN_.js.map
