{"version":3,"file":"TopicDetail-SB7Y2IDO.js","sources":["../../src/pages/TopicDetail.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useTopics } from '../context/TopicContext.jsx';\nimport NewsSection from '../components/NewsSection.jsx';\nimport { fetchTopicNews } from '../services/topicService.js';\nimport './FollowingPage.css';\n\nexport default function TopicDetail() {\n    const { topicId } = useParams();\n    const navigate = useNavigate();\n    const { followedTopics, addToHistory } = useTopics();\n\n    const [articles, setArticles] = useState([]);\n    const [loading, setLoading] = useState(true);\n\n    // Find the topic in the context state\n    const topic = followedTopics.find(t => t.id === topicId);\n\n    useEffect(() => {\n        // If we don't have the topic yet (e.g., refreshing on this page), wait a bit or handle it.\n        // If followedTopics is empty but loading is true in context, we wait.\n        if (!topic) return;\n\n        const loadNews = async () => {\n            setLoading(true);\n            try {\n                // Fetch fresh news for this topic\n                const data = await fetchTopicNews(topic);\n                setArticles(data);\n            } catch (err) {\n                console.error(err);\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        loadNews();\n    }, [topicId, topic]); // Dependency on topicId/topic\n\n    // Handle \"Topic Not Found\" after initial load\n    if (!topic) {\n        // Return null or loader while context initializes\n        return (\n             <div className=\"page-container\">\n                 <div className=\"loading\" style={{padding: '20px'}}>\n                     <p>Loading topic...</p>\n                     <button onClick={() => navigate('/following')}>Back to List</button>\n                 </div>\n             </div>\n        );\n    }\n\n    return (\n        <div className=\"page-container\">\n            {/* Custom Sticky Header */}\n            <header\n                className=\"header\"\n                style={{\n                    position: 'sticky',\n                    top: 0,\n                    zIndex: 100,\n                    background: 'var(--bg-secondary)',\n                    borderBottom: '1px solid var(--border-color)',\n                    padding: '10px 15px',\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: '15px'\n                }}\n            >\n                <button\n                    onClick={() => navigate('/following')}\n                    style={{\n                        background: 'none',\n                        border: 'none',\n                        fontSize: '1.5rem',\n                        cursor: 'pointer',\n                        color: 'var(--text-primary)'\n                    }}\n                >\n                    ‚Üê\n                </button>\n                <h1 style={{margin: 0, fontSize: '1.2rem', display: 'flex', alignItems: 'center', gap: '8px'}}>\n                    <span>{topic?.icon}</span>\n                    {topic?.name}\n                </h1>\n            </header>\n\n            <main className=\"main-content\" style={{paddingTop: '0'}}>\n                {loading ? (\n                    <div className=\"loading\" style={{padding: '20px', textAlign: 'center'}}>\n                        <div className=\"loading__spinner\"></div>\n                        <p>Fetching latest news...</p>\n                    </div>\n                ) : (\n                    <div style={{padding: '10px'}}>\n                        <NewsSection\n                            id={`topic-${topicId}`}\n                            title={`Latest on ${topic?.name}`}\n                            icon={topic?.icon}\n                            news={articles}\n                            maxDisplay={50}\n                            showExpand={false}\n                            colorClass=\"news-section__title--world\"\n                            // Anticipating Step 8 feature\n                            onArticleClick={(article) => addToHistory(article)}\n                        />\n                    </div>\n                )}\n            </main>\n        </div>\n    );\n}\n"],"names":["TopicDetail","topicId","useParams","navigate","useNavigate","followedTopics","addToHistory","useTopics","articles","setArticles","useState","loading","setLoading","topic","t","useEffect","data","fetchTopicNews","err","jsxs","jsx","NewsSection","article"],"mappings":"sOAOA,SAAwBA,GAAc,CAClC,KAAM,CAAE,QAAAC,CAAA,EAAYC,EAAA,EACdC,EAAWC,EAAA,EACX,CAAE,eAAAC,EAAgB,aAAAC,CAAA,EAAiBC,EAAA,EAEnC,CAACC,EAAUC,CAAW,EAAIC,EAAAA,SAAS,CAAA,CAAE,EACrC,CAACC,EAASC,CAAU,EAAIF,EAAAA,SAAS,EAAI,EAGrCG,EAAQR,EAAe,KAAKS,GAAKA,EAAE,KAAOb,CAAO,EAwBvD,OAtBAc,EAAAA,UAAU,IAAM,CAGZ,GAAI,CAACF,EAAO,QAEK,SAAY,CACzBD,EAAW,EAAI,EACf,GAAI,CAEA,MAAMI,EAAO,MAAMC,EAAeJ,CAAK,EACvCJ,EAAYO,CAAI,CACpB,OAASE,EAAK,CACV,QAAQ,MAAMA,CAAG,CACrB,QAAA,CACIN,EAAW,EAAK,CACpB,CACJ,GAEA,CACJ,EAAG,CAACX,EAASY,CAAK,CAAC,EAGdA,EAaDM,EAAAA,KAAC,MAAA,CAAI,UAAU,iBAEX,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACG,UAAU,SACV,MAAO,CACH,SAAU,SACV,IAAK,EACL,OAAQ,IACR,WAAY,sBACZ,aAAc,gCACd,QAAS,YACT,QAAS,OACT,WAAY,SACZ,IAAK,MAAA,EAGT,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACG,QAAS,IAAMjB,EAAS,YAAY,EACpC,MAAO,CACH,WAAY,OACZ,OAAQ,OACR,SAAU,SACV,OAAQ,UACR,MAAO,qBAAA,EAEd,SAAA,GAAA,CAAA,EAGDgB,EAAAA,KAAC,KAAA,CAAG,MAAO,CAAC,OAAQ,EAAG,SAAU,SAAU,QAAS,OAAQ,WAAY,SAAU,IAAK,OACnF,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAM,YAAO,IAAA,CAAK,EAClBP,GAAO,IAAA,CAAA,CACZ,CAAA,CAAA,CAAA,EAGJO,MAAC,QAAK,UAAU,eAAe,MAAO,CAAC,WAAY,KAC9C,SAAAT,SACI,MAAA,CAAI,UAAU,UAAU,MAAO,CAAC,QAAS,OAAQ,UAAW,UACzD,SAAA,CAAAS,EAAAA,IAAC,MAAA,CAAI,UAAU,kBAAA,CAAmB,EAClCA,EAAAA,IAAC,KAAE,SAAA,yBAAA,CAAuB,CAAA,EAC9B,EAEAA,MAAC,MAAA,CAAI,MAAO,CAAC,QAAS,QAClB,SAAAA,EAAAA,IAACC,EAAA,CACG,GAAI,SAASpB,CAAO,GACpB,MAAO,aAAaY,GAAO,IAAI,GAC/B,KAAMA,GAAO,KACb,KAAML,EACN,WAAY,GACZ,WAAY,GACZ,WAAW,6BAEX,eAAiBc,GAAYhB,EAAagB,CAAO,CAAA,CAAA,EAEzD,CAAA,CAER,CAAA,EACJ,EAlEKF,EAAAA,IAAC,MAAA,CAAI,UAAU,iBACX,SAAAD,OAAC,MAAA,CAAI,UAAU,UAAU,MAAO,CAAC,QAAS,MAAA,EACtC,SAAA,CAAAC,EAAAA,IAAC,KAAE,SAAA,kBAAA,CAAgB,QAClB,SAAA,CAAO,QAAS,IAAMjB,EAAS,YAAY,EAAG,SAAA,cAAA,CAAY,CAAA,CAAA,CAC/D,CAAA,CACJ,CA+Db"}