import{j as s,m as g,n as m,o as f}from"./index-Cu5lRAYs.js";import{e as x,b as u}from"./vendor-react-BMB3rUHI.js";/* empty css                      */import"./utils-sentiment-EAYl0nxh.js";function w({topic:i,articleCount:e,onClick:c,onRemove:t}){const a=x(),l=i.lastFetched?j(new Date(i.lastFetched)):"Never updated",r=()=>{c?c(i):a(`/following/${i.id}`)};return s.jsxs("div",{className:"topic-card",onClick:r,children:[s.jsx("div",{className:"topic-card__icon",children:i.icon||"ðŸ“°"}),s.jsxs("div",{className:"topic-card__content",children:[s.jsx("h3",{className:"topic-card__name",children:i.name}),s.jsxs("p",{className:"topic-card__update",children:["Last update: ",l]})]}),s.jsx("div",{className:"topic-card__badge",children:e>0&&s.jsxs("span",{className:"topic-card__count",children:[e," new"]})}),s.jsx("button",{className:"topic-card__menu",onClick:d=>{d.stopPropagation(),window.confirm(`Stop following "${i.name}"?`)&&t(i.id)},"aria-label":"Remove topic",children:"â‹®"})]})}function j(i){if(!i)return"Never";const e=Math.floor((Date.now()-i)/6e4);if(e<1)return"Just now";if(e<60)return`${e} min${e>1?"s":""} ago`;const c=Math.floor(e/60);return c<24?`${c} hour${c>1?"s":""} ago`:`${Math.floor(c/24)} days ago`}function _({onAddTopic:i}){const[e,c]=u.useState(""),[t,a]=u.useState([]),[l,r]=u.useState(!1),d=async n=>{if(n.preventDefault(),!!e.trim()){r(!0);try{const o=g(e),p=await m(o,"preview");a(p.slice(0,5))}catch(o){console.error("Search failed:",o),alert("Failed to find news for this topic. Try different keywords.")}finally{r(!1)}}},h=()=>{const n={name:e,query:e,icon:v(e),options:{country:"IN",lang:"en",timeRange:"30d"}};i(n),c(""),a([])};return s.jsxs("div",{className:"topic-search",children:[s.jsxs("form",{onSubmit:d,children:[s.jsx("input",{type:"text",placeholder:"Search topics... (e.g., Tamil Nadu Elections)",value:e,onChange:n=>c(n.target.value),className:"topic-search__input"}),s.jsx("button",{type:"submit",disabled:l,children:l?"...":"Search"})]}),t.length>0&&s.jsxs("div",{className:"topic-search__preview",children:[s.jsxs("h4",{children:['Preview: "',e,'"']}),s.jsx("ul",{children:t.map((n,o)=>s.jsx("li",{children:n.title},o))}),s.jsxs("button",{onClick:h,className:"topic-search__follow-btn",children:['âž• Follow "',e,'"']})]})]})}function v(i){const e=i.toLowerCase();return e.includes("election")?"ðŸ—³ï¸":e.includes("market")||e.includes("stock")||e.includes("sensex")?"ðŸ“Š":e.includes("film")||e.includes("movie")||e.includes("cinema")?"ðŸŽ¬":e.includes("sport")||e.includes("cricket")||e.includes("ipl")?"ðŸ":e.includes("tech")||/\bai\b/.test(e)||e.includes("startup")?"ðŸ’»":e.includes("weather")||e.includes("rain")?"â˜ï¸":"ðŸ“°"}function S(){const{followedTopics:i,topicNews:e,loading:c,suggestions:t,addTopic:a,removeTopic:l,refreshTopics:r}=f();u.useEffect(()=>{},[]);const d=i.length>0,h=n=>{a({name:n,query:n,icon:"ðŸ”",options:{country:"IN",lang:"en",timeRange:"30d"}})};return s.jsxs("div",{className:"following-page",children:[s.jsx("header",{className:"following-page__header",children:s.jsx("h1",{children:"ðŸ“Œ Following"})}),s.jsxs("div",{className:"following-page__content",children:[s.jsx(_,{onAddTopic:a}),t.length>0&&s.jsxs("div",{className:"following-page__suggestions-section",children:[s.jsx("h4",{children:"Suggested for you"}),s.jsx("div",{className:"following-page__suggestions",children:t.map((n,o)=>s.jsxs("button",{className:"suggestion-chip",onClick:()=>h(n.word),children:["+ ",n.word]},o))})]}),c&&s.jsx("p",{children:"Loading updates..."}),d?s.jsxs("div",{className:"following-page__topics",children:[s.jsx("h2",{className:"following-page__section-title",children:"Your Topics"}),i.map(n=>s.jsx(w,{topic:n,articleCount:e[n.id]?.length||0,onRemove:l},n.id))]}):s.jsxs("div",{className:"following-page__empty",children:[s.jsx("p",{children:"No topics followed yet."}),s.jsx("p",{children:"Search for topics above to get started!"})]})]})]})}export{S as default};
//# sourceMappingURL=FollowingPage-1y7P-aSH.js.map
