import{k as S,u as T,d as R,j as e,s as i}from"./index-Cu5lRAYs.js";import{e as k,b as r}from"./vendor-react-BMB3rUHI.js";import{H as C}from"./Header-wyIJ1Xr8.js";import{T as E}from"./Toggle-BCPcvk4N.js";import{b as g,g as o}from"./timeSegment-SF6hnHYw.js";import"./utils-sentiment-EAYl0nxh.js";function I(){const j=k(),[n,d]=r.useState(()=>g(o())),[c,h]=r.useState(!1),[p,N]=r.useState(()=>S()),[m]=r.useState(()=>g(o())),{refreshWeather:v}=T(),{refreshNews:y}=R(),b=async()=>{h(!0);const s=Object.keys(n).filter(a=>n[a]),t=[],l=[];s.forEach(a=>{a==="weather"?(t.push(v(!0)),i("weather")):a==="market"?i("market"):(l.push(a),i(a))}),l.length>0&&t.push(y(l));try{await Promise.all(t)}catch(a){console.error("Refresh failed",a)}N("Just now"),h(!1),setTimeout(()=>j("/"),500)},x=s=>{d({world:s,india:s,chennai:s,trichy:s,local:s,social:s,weather:s,market:s})},u=[{key:"world",icon:"ðŸŒ",label:"World News",desc:"International headlines"},{key:"india",icon:"ðŸ‡®ðŸ‡³",label:"India News",desc:"National news"},{key:"chennai",icon:"ðŸ›ï¸",label:"Chennai News",desc:"Chennai city updates"},{key:"trichy",icon:"ðŸ›ï¸",label:"Trichy News",desc:"Trichy local news"},{key:"local",icon:"ðŸ“",label:"Local (Muscat)",desc:"Muscat & Oman news"},{key:"social",icon:"ðŸ‘¥",label:"Social Trends",desc:"Trending topics"},{key:"weather",icon:"â˜ï¸",label:"Weather",desc:"Chennai, Trichy, Muscat"},{key:"market",icon:"ðŸ“ˆ",label:"Market",desc:"BSE, NSE, Movers"}],f=Object.values(n).filter(Boolean).length;return e.jsxs(e.Fragment,{children:[e.jsx(C,{title:"Refresh Content",showBack:!0,backTo:"/"}),e.jsxs("div",{className:"refresh-page",children:[e.jsxs("div",{className:"refresh-info",children:[e.jsx("span",{children:"â±ï¸"}),e.jsxs("span",{children:["Last refresh: ",e.jsx("strong",{children:p})]})]}),e.jsxs("div",{style:{display:"flex",gap:"var(--spacing-sm)",marginBottom:"var(--spacing-md)"},children:[e.jsx("button",{className:"btn btn--secondary",style:{flex:1},onClick:()=>x(!0),children:"Select All"}),e.jsx("button",{className:"btn btn--secondary",style:{flex:1},onClick:()=>x(!1),children:"Clear All"})]}),e.jsxs("section",{className:"settings-section",children:[e.jsxs("h2",{className:"settings-section__title",children:[e.jsx("span",{children:"ðŸ“‹"}),"Select Sections to Refresh",e.jsxs("span",{style:{marginLeft:"auto",fontSize:"0.8rem",fontWeight:"normal",color:"var(--accent-primary)"},children:[f,"/",u.length]})]}),e.jsx("div",{className:"settings-card",children:u.map(({key:s,icon:t,label:l,desc:a})=>e.jsxs("div",{className:"settings-item",children:[e.jsxs("div",{className:"settings-item__label",style:{flexDirection:"column",alignItems:"flex-start"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"var(--spacing-sm)"},children:[e.jsx("span",{className:"settings-item__icon",children:t}),l,m[s]&&e.jsx("span",{style:{color:"var(--weather-sun)",fontSize:"0.7rem"},children:"â˜…"})]}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-muted)",marginLeft:"28px"},children:a})]}),e.jsx(E,{checked:n[s],onChange:_=>d(w=>({...w,[s]:_})),recommended:m[s]})]},s))})]}),e.jsxs("button",{className:`refresh-btn ${c?"refresh-btn--loading":""}`,onClick:b,disabled:c||f===0,children:[e.jsx("span",{className:"refresh-btn__icon",children:c?"âŸ³":"ðŸ”„"}),e.jsx("span",{children:c?"Refreshing...":"Refresh Now"})]}),e.jsxs("div",{className:"schedule-card",children:[e.jsxs("div",{className:"schedule-card__title",children:[e.jsx("span",{children:"ðŸ“Š"}),"Auto-Refresh Schedule"]}),e.jsxs("div",{className:"schedule-item",children:[e.jsx("span",{className:"schedule-item__label",children:"Weather Forecast"}),e.jsx("span",{className:"schedule-item__value",children:"Every 3 hours"})]}),e.jsxs("div",{className:"schedule-item",children:[e.jsx("span",{className:"schedule-item__label",children:"Weather Nowcast"}),e.jsx("span",{className:"schedule-item__value",children:"Every 1 hour"})]}),e.jsxs("div",{className:"schedule-item",children:[e.jsx("span",{className:"schedule-item__label",children:"News Updates"}),e.jsx("span",{className:"schedule-item__value",children:"Every 30 minutes"})]}),e.jsxs("div",{className:"schedule-item",children:[e.jsx("span",{className:"schedule-item__label",children:"Market Data"}),e.jsx("span",{className:"schedule-item__value",children:"Every 5 minutes"})]}),e.jsxs("div",{className:"schedule-item",children:[e.jsx("span",{className:"schedule-item__label",children:"Social Trends"}),e.jsx("span",{className:"schedule-item__value",children:"Every 15 minutes"})]})]}),e.jsxs("div",{className:"card",style:{marginTop:"var(--spacing-md)",textAlign:"center"},children:[e.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--text-muted)"},children:["Current Segment: ",e.jsx("strong",{style:{color:"var(--accent-primary)"},children:o()?.name})]}),e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-muted)",marginTop:"4px"},children:"â˜… = Recommended sections for this time"})]})]})]})}export{I as default};
//# sourceMappingURL=RefreshPage-BRTa7x48.js.map
